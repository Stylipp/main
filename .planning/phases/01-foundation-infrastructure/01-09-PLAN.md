---
phase: 01-foundation-infrastructure
plan: 09
type: execute
depends_on: ["01-02"]
files_modified: [apps/stylipp.com/src/i18n/index.ts, apps/stylipp.com/src/i18n/locales/en/translation.json, apps/stylipp.com/src/main.tsx, apps/stylipp.com/src/components/LanguageExample.tsx]
---

<objective>
Set up i18n scaffolding with react-i18next for English primary language and translation-ready architecture.

Purpose: Establish internationalization foundation from the start to avoid expensive refactoring later. English is the only language for MVP, but architecture supports adding new languages without code changes. All user-facing text will use translation keys from day one.
Output: Working i18n system with English translations, example component demonstrating usage patterns, ready for future language additions.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-plan.md
./summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/01-foundation-infrastructure/01-02-SUMMARY.md

**Primary language**: English (en)
**MVP scope**: English only, but translation-ready
**Future languages**: Can add without code changes (just add translation JSON files)
**Library**: react-i18next (React bindings for i18next)
**Namespace strategy**: Single namespace for MVP (common), can split by feature later
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install and configure react-i18next</name>
  <files>apps/stylipp.com/package.json, apps/stylipp.com/src/i18n/index.ts, apps/stylipp.com/vite.config.ts</files>
  <action>
    Install dependencies:
    `cd apps/stylipp.com && pnpm add i18next react-i18next i18next-browser-languagedetector`

    Create apps/stylipp.com/src/i18n/index.ts:
    - Import i18next, initReactI18next, LanguageDetector
    - Import English translation from ./locales/en/translation.json
    - Configure i18next:
      - resources: { en: { translation: enTranslation } }
      - fallbackLng: "en"
      - lng: "en" (default language)
      - debug: false (set true in development if needed)
      - interpolation: { escapeValue: false } (React escapes by default)
      - detection: { order: ["localStorage", "navigator"], caches: ["localStorage"] }
    - Initialize with initReactI18next
    - Export default i18n

    Optional: Add vite-plugin-i18next-loader to vite.config.ts if wanting dynamic imports (defer to later if not needed for MVP)
  </action>
  <verify>apps/stylipp.com/src/i18n/index.ts imports and initializes without errors, i18next configured with English fallback</verify>
  <done>react-i18next installed and configured with English as default language, language detection from localStorage/browser</done>
</task>

<task type="auto">
  <name>Task 2: Create English translation file with common keys</name>
  <files>apps/stylipp.com/src/i18n/locales/en/translation.json</files>
  <action>
    Create apps/stylipp.com/src/i18n/locales/en/translation.json:
    ```json
    {
      "app": {
        "name": "Stylipp",
        "tagline": "Your AI Personal Stylist"
      },
      "common": {
        "loading": "Loading...",
        "error": "Something went wrong",
        "retry": "Try again",
        "cancel": "Cancel",
        "save": "Save",
        "delete": "Delete",
        "edit": "Edit",
        "close": "Close"
      },
      "navigation": {
        "home": "Home",
        "feed": "Discover",
        "collections": "Collections",
        "profile": "Profile"
      },
      "auth": {
        "login": "Log in",
        "logout": "Log out",
        "signup": "Sign up",
        "email": "Email",
        "password": "Password"
      },
      "onboarding": {
        "title": "Let's find your style",
        "upload_photos": "Upload 2 outfit photos",
        "calibration_swipes": "Swipe on 15 items",
        "almost_done": "Almost there!"
      },
      "errors": {
        "not_found": "Page not found",
        "unauthorized": "Please log in to continue",
        "server_error": "Server error, please try again later"
      }
    }
    ```

    This provides common keys for MVP. Features will add their own keys later.

    Create directory structure: `mkdir -p apps/stylipp.com/src/i18n/locales/en`
  </action>
  <verify>apps/stylipp.com/src/i18n/locales/en/translation.json exists with app, common, navigation, auth, onboarding, errors keys</verify>
  <done>English translation file created with common MVP keys organized by feature/context</done>
</task>

<task type="auto">
  <name>Task 3: Integrate i18n into app and create usage example</name>
  <files>apps/stylipp.com/src/main.tsx, apps/stylipp.com/src/components/LanguageExample.tsx, apps/stylipp.com/src/pages/HomePage.tsx</files>
  <action>
    Update apps/stylipp.com/src/main.tsx:
    - Import './i18n' at top (side-effect import to initialize i18next)
    - Add Suspense wrapper around App with fallback loading div

    Create apps/stylipp.com/src/components/LanguageExample.tsx:
    - Import useTranslation from react-i18next
    - Component demonstrating translation hook usage:
      ```tsx
      const { t } = useTranslation();
      return (
        <Box>
          <Typography variant="h4">{t('app.name')}</Typography>
          <Typography variant="subtitle1">{t('app.tagline')}</Typography>
          <Button>{t('common.save')}</Button>
        </Box>
      );
      ```

    Update apps/stylipp.com/src/pages/HomePage.tsx:
    - Replace hardcoded "Stylipp - AI Personal Stylist" with translation keys
    - Use const { t } = useTranslation()
    - Show: t('app.name') and t('app.tagline')

    Add TypeScript types for i18next:
    Create apps/stylipp.com/src/i18n/react-i18next.d.ts:
    ```typescript
    import 'react-i18next';
    import translation from './locales/en/translation.json';

    declare module 'react-i18next' {
      interface CustomTypeOptions {
        resources: {
          translation: typeof translation;
        };
      }
    }
    ```
    This enables type-safe translation keys with autocomplete.
  </action>
  <verify>Visit localhost:5173, HomePage shows translated text from en/translation.json, no console errors about missing translations</verify>
  <done>i18n integrated into React app with Suspense, HomePage uses translation keys, TypeScript types provide autocomplete for translation keys</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] react-i18next installed and configured
- [ ] apps/stylipp.com/src/i18n/index.ts initializes i18next
- [ ] English translation file exists with common keys
- [ ] HomePage uses t() hook for translated text
- [ ] Browser shows "Stylipp" and "Your AI Personal Stylist" from translations
- [ ] No console warnings about missing translation keys
- [ ] TypeScript autocomplete works for translation keys (t('app.name'))
</verification>

<success_criteria>

- i18next configured with English as default and fallback
- Translation file structured by feature/context
- useTranslation hook demonstrated in components
- TypeScript types enable autocomplete for translation keys
- Architecture ready to add new languages (just add JSON files)
- All user-facing text uses translation keys from day one
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation-infrastructure/01-09-SUMMARY.md`:

# Phase 1 Plan 9: i18n Scaffolding Summary

**Set up react-i18next with English primary language and translation-ready architecture**

## Accomplishments

- Installed and configured react-i18next with i18next-browser-languagedetector
- Created English translation file with common MVP keys
- Integrated i18n into React app with Suspense wrapper
- Added TypeScript types for type-safe translation keys
- Updated HomePage to use translation hooks
- Created example component demonstrating i18n patterns

## Files Created/Modified

- `apps/stylipp.com/src/i18n/index.ts` - i18next initialization and configuration
- `apps/stylipp.com/src/i18n/locales/en/translation.json` - English translations
- `apps/stylipp.com/src/i18n/react-i18next.d.ts` - TypeScript types for autocomplete
- `apps/stylipp.com/src/components/LanguageExample.tsx` - i18n usage example
- Updated `apps/stylipp.com/src/main.tsx` - Import i18n and add Suspense
- Updated `apps/stylipp.com/src/pages/HomePage.tsx` - Use translation keys

## Decisions Made

- Single namespace (translation) for MVP simplicity
- Language detection from localStorage then browser settings
- English only for MVP, but architecture supports adding languages without code changes
- TypeScript custom types for translation key autocomplete
- Structured translation keys by feature/context (app, common, navigation, auth, onboarding, errors)

## Issues Encountered

None

## Next Step

Phase 1 complete! All 9 plans executed successfully.

**Phase 1 Deliverables:**
- ✅ Monorepo with pnpm workspaces
- ✅ React PWA with Vite, MUI, React Router
- ✅ FastAPI backend with SQLAlchemy 2.0 async and Alembic
- ✅ Docker Compose with PostgreSQL, Qdrant, Redis
- ✅ JWT authentication with ES256 keypairs
- ✅ Hetzner Object Storage configured
- ✅ Traefik reverse proxy with Cloudflare Tunnel routing
- ✅ CI/CD with GitHub Actions and Husky pre-commit hooks
- ✅ i18n scaffolding with react-i18next

**Next Phase:** Phase 2 - Product Ingestion & Embeddings
</output>
